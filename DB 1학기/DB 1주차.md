## Database

Data : 현실세계에서 수집하는 정보를 의미함

DB(Database) is an organized collection of data

Database management system (DBMS) is the software that interacts with end users, applications, and database itself to capture and analyze data

즉, 데이터베이스 관리 시스템(DBMS)은 최종 사용자, 애플리케이션 및 데이터베이스 자체와 상호 작용하여 데이터를 캡처하고 분석하는 소프트웨어이다

<br/>

## 기업의 DBMS 

DBMS에는 특정 기업에 대한 정보가 포함되어 있다

1. 상호 연관된 데이터 모음

2. 데이터에 액세스할 수 있는 프로그램 세트

3. 사용하기 편리하면서도 효율적인 환경

<br/>

데이터베이스 시스템은 다음과 같은 데이터 컬렉션을 관리하는 데 사용됨

• 매우 가치 있는

• 비교적 큰

• 여러 사용자와 애플리케이션이 동시에 액세스하는 경우가 많습니다

현대 데이터베이스 시스템은 방대한 양의 복잡한 데이터를 관리하는 것을 목표로 하는 복잡한 소프트웨어 시스템입니다

데이터베이스는 우리 삶의 모든 측면에 영향을 미칩니다(예: 온라인 쇼핑, 은행 시스템, SNS 등등)

<br/>

![Image](https://github.com/user-attachments/assets/dae00d96-1f27-4f3b-9b5c-e09ab3ec0f49)

<br/>

## 데이터베이스의 목적

**데이터베이스 시스템의 주요 목적은 사용자에게 데이터의 추상적(abstract)인 뷰(View)를 제공하는 것이다**

또한, 파일 시스템의 단점을 극복하기 위함이다

과거에는 데이터베이스 시스템이 존재하지 않았고, 데이터를 저장하려면 단순한 **파일 시스템(File System)** 을 사용해야 했다. 즉, 데이터를 텍스트 파일(.txt), CSV 파일(.csv), 또는 기타 바이너리 파일 형태로 저장하고, 이 파일을 읽고 쓰는 별도의 프로그램을 개발해야 했다.

하지만, 이렇게 파일 시스템을 직접 사용하면 여러 가지 문제점이 발생했다

<br/>

## 1.Data redundancy and inconsistency (데이터 중복과 불일치)

데이터를 여러 개의 파일에 저장하다 보면 중복된 데이터가 생깁니다.
예를 들어, 고객 정보가 "주문 파일"과 "배송 파일" 두 곳에 저장되면, 한 곳에서 정보가 변경되었을 때 다른 곳에는 반영되지 않을 수 있고, 이렇게 되면 데이터 불일치 문제가 발생한다

<br/>

## 2.Difficulty in accessing data (데이터 접근의 어려움)

새로운 작업(예: "5월 매출을 계산하는 기능")을 하려면, 새로운 프로그램을 직접 작성해야 함

즉, 사용자가 새로운 질의(Query)를 할 때마다 프로그래머가 코드를 작성해야 했다

<br/> 

## 3.Data isolation (데이터 고립)

데이터가 여러 개의 파일과 다양한 형식(CSV, JSON, XML 등)으로 저장되면, 특정 데이터를 검색하는 프로그램을 작성하는 것이 어려웠다. 따라서 데이터를 조합하려면 복잡한 프로그램이 필요했음

<br/>

## 4.Integrity problems(무결성 문제)

무결성 제약조건(예: "계좌 잔액은 0 이상이어야 한다")이 데이터베이스 시스템이 아니라 각 프로그램 코드 내부에 포함됨.

이렇게 되면, 새로운 무결성 규칙을 추가하거나 기존 규칙을 변경하는 것이 어려워짐.

예시: "최소 주문 금액을 10,000원에서 15,000원으로 변경해야 한다"면, 관련된 모든 프로그램을 수정해야 함.

<br/>

## 5.Atomicity of updates (원자성)

시스템 오류나 충돌이 발생하면 일부 데이터만 변경된 채 남아, 데이터베이스가 **일관되지 않은 상태(Inconsistent State)** 가 될 수 있음.

즉, 일부 업데이트만 수행된 채 중단되면 데이터 오류가 발생할 가능성이 있다

<br/>

## 6.Concurrent access by multiple users (동시성 문제)

다수의 사용자가 동시에 동일한 데이터를 수정하면 데이터 불일치(Inconsistency) 문제가 발생할 수 있다

<br/>

## 보안 문제

파일 시스템에서는 이런 세밀한 권한 관리가 어렵기 때문에, 보안 문제가 발생할 가능성이 큼.

<br/>

## View of Data

데이터베이스 시스템(Database System)은 **상호 연관된 데이터(interrelated data)와** 이를 **접근하고 수정할 수 있도록 하는 프로그램들의 집합**이다

즉, 데이터베이스 시스템은 데이터를 효율적으로 저장하고 관리하는 소프트웨어 시스템이고 MySQL, PostgreSQL, Oracle DB 등이 이에 해당

주요기능 

1. 데이터를 저장, 검색, 수정, 삭제할 수 있도록 지원

2. 여러 사용자가 동시에 접근할 수 있도록 관리

3.  데이터 일관성 및 보안을 유지

<br/>

**데이터베이스 시스템의 주요 목적은 사용자에게 데이터의 추상적(abstract)인 뷰(View)를 제공하는 것이다**

1. Datac models : 데이터, 데이터 간 관계, 의미, 제약 조건 등을 정의하는 개념적 도구. 쉽게 말해, 데이터를 어떻게 표현할 것인지 설계하는 방법

<br/>

예시: 관계형 데이터 모델(Relational Model)

데이터를 **테이블(Table, 관계형 구조)** 로 표현함. 각 테이블은 **행(Row)과 열(Column)**로 구성되고, SQL을 사용하여 데이터 조작 가능

<br/>

## 예시

![Image](https://github.com/user-attachments/assets/c5963c6d-92a6-4581-bf78-8fbe7f335ace)

<br/>

2. Data Abstraction (데이터 추상화) : 사용자가 데이터의 복잡한 구조를 이해할 필요 없이, 여러 추상화 레벨을 통해 쉽게 사용할 수 있도록 하는 것

<br/>

## 데이터베이스 시스템이 제공하는 핵심 기능 

<br/>

## 1. Data(데이터)

**데이터를 저장하고 표현하는 방식**

데이터란, 데이터베이스에 저장되는 **실제 값(Value)**을 의미합니다.
예를 들어, 학생 정보를 저장하는 데이터베이스에서는 다음과 같은 데이터를 저장할 수 있습니다.

<br/>

## 2. Data Relationships(데이터 간의 관계)

**데이터 간의 연관성을 정의하는 방식**

현실 세계에서는 데이터가 서로 연결되어 있음.

데이터베이스에서도 이 관계를 모델링하여 표현할 수 있어야 함.

관계형 데이터베이스에서는 테이블 간의 관계(Relationship)를 설정하여 데이터를 효율적으로 연결함.

<br/>

## 3. Data Semantics(데이터 의미)

**데이터가 갖는 의미를 명확히 정의하는 것**

같은 데이터를 저장하더라도 데이터의 의미를 어떻게 해석할 것인지 정의해야 함

데이터가 의미하는 바를 명확히 설명하면, 정확한 검색과 처리가 가능

<br/>

## 4.Data Constraints(데이터 제약 조건)

**데이터의 무결성을 유지하기 위해 설정하는 규칙** (무결성 : 데이터의 정확성과 일관성을 유지하는 것)

데이터의 **일관성(Consistency)** 을 유지하기 위해 특정한 규칙(Constraints)을 설정함.

잘못된 데이터 입력을 방지하여 데이터베이스의 신뢰성을 높임.

<br/>

## Levels of Abstraction

**1. Physical level**

데이터가 실제로 저장되는 방식임

예를 들어, 강사(instructor) 데이터를 저장할 때 파일 구조, 인덱스, 블록 할당 방식 등이 포함된다

사용자는 일반적으로 이 수준을 직접 다루지 않으며, DBMS가 내부적으로 관리

<br/>

**2. Logical Level**

데이터가 어떤 구조로 저장되는지와 데이터 간의 관계를 설명

예제 코드에서 instructor 레코드는 다음과 같이 정의됨

```ruby
type instructor = record
    ID : string;
    name : string;
    dept_name : string;
    salary : integer;
    end;
```

여기서 instructor 테이블(레코드)에는 ID, 이름(name), 학과(dept_name), 급여(salary) 등의 속성이 포함

<br/>

**3. View Level**

보안 또는 편의성 목적으로 특정 사용자에게 데이터의 일부만 보이도록 설정

예를 들어, 학생이 강사의 급여를 볼 수 없도록 설정

<br/>

![스크린샷 2025-03-16 232345](https://github.com/user-attachments/assets/44982ac8-3b09-4bf3-9ae9-b1e3b69495f7)

<br/>

## Schema

정의 : 어떤 데이터가 어떤 형식으로 저장되고, 테이블 간의 관계가 어떻게 설정되는지 정의 

쉽게 말하면

1. 데이터베이스의 설계도

2. 테이블, 컬럼(속성), 데이터 타입, 관계 등을 정의

3. 데이터를 어떻게 저장하고, 연결할지를 결정하는 구조

<br/>

**Logical Schema**

데이터베이스의 전체적인 논리적 구조를 정의

테이블, 컬럼, 데이터 타입, 관계 등이 포함됨

프로그래밍 언어에서 "변수의 타입"과 유사

<br/>

**Physical Schema**

데이터베이스가 실제로 디스크에 저장되는 방식을 정의

인덱스, 파티션, 저장 포맷(B-Tree, Hash 등) 포함

데이터 저장 구조를 결정하여 효율적인 검색과 저장이 가능하도록 설계

<br/>

**Instance**

특정 시점에서 데이터베이스에 저장된 실제 데이터

프로그래밍에서 "변수의 현재 값"과 유사

데이터베이스는 시간이 지나면서 변경되지만, 스키마 자체는 변경되지 않을 수도 있음 (은행 계좌 구조에서 통장 금액은 변하지만 구조 자체(이름,계좌번호 등등)은 변화 없음)

<br/>

## Database Languages

DB system에서 2가지 언어를 제공한다 

1. 데이터 정의 언어(DDL, Data Definition Language): **데이터베이스의 스키마(schema)를 정의하는 언어**. 테이블 생성, 변경, 삭제 등의 작업을 수행함

2. 데이터 조작 언어(DML, Data Manipulation Language): 데이터의 조회 및 변경(삽입, 수정, 삭제)을 수행하는 언어

하지만 실무에서는 별개의 언어로 구분되지 않음. 즉 DDL과 DML은 실제로 완전히 분리된 언어가 아니라, **단일 데이터베이스 언어(SQL)** 의 일부로 존재함

<br/>

## DDL 

DDL 컴파일러: 테이블 구조를 정의하고 이를 **Data Dictionary**에 저장함

컴파일러 : 프로그래밍 언어로 작성된 코드를 기계어(컴퓨터가 이해할 수 있는 코드)로 변환하는 프로그램

Data Dictionary: 데이터베이스의 metadata를 저장하는 곳

metadata: 데이터에 대한 데이터 (예: 테이블 구조, 제약 조건, 권한 정보)

데이터베이스 시스템이 스키마 정보, 제약 조건, 접근 권한 등을 관리하는 데 사용됨

<br/>

## DML

DML의 두 가지 유형

**1. Procedural DML(절차적)**

사용자가 **무엇(What) + 어떻게(How)** 데이터를 가져올지 명확하게 지정해야 함

<br/>

**2. Declarative DML (Non-Procedural DML 비절차적)**

사용자가 무엇(What) 만 지정하면, **시스템이 어떻게(How) 검색할지를 자동 결정**

비절차적 DML이 절차적 DML보다 배우기 쉽고 사용하기 간편함

DML은 Query Language라고도 부름 

<br/>

**SQL Query Language는 비절차적 언어이다**

또항 SQL은 튜링 완전(Turing Complete)한 언어가 아니다 

**SQL 자체만으로 복잡한 계산(예: 루프, 조건문 포함 알고리즘) 수행 불가**

고급 기능(제어 흐름, 반복문 등)을 사용하려면 다른 프로그래밍 언어와 함께 사용해야 함

보통 Java, Python, C++ 등의 프로그래밍 언어에서 SQL을 포함하여 사용

<br/>

## Database Design

Database Design는 데이터베이스의 구조와 저장 방식을 결정하는 중요한 과정이다 

이를 크게 **논리적 설계(Logical Design)* *와 **물리적 설계(Physical Design)** 로 나눌 수 있다

<br/>

**1. Logical Design (논리적 설계)**

목표: 데이터베이스 스키마를 결정하고, 데이터가 어떻게 구성될지에 대한 전략을 세우는 단계

비즈니스 결정: 어떤 속성(attributes)을 기록해야 하는지 결정 -> 예: 고객 정보 데이터베이스에서 기록해야 할 속성은 이름, 주소, 전화번호, 이메일 등

컴퓨터 과학적 결정: 어떤 관계 스키마(relation schema)를 사용할지, 그리고 이 속성들이 어떤 관계에 분배될지 결정 -> 예: 고객 테이블과 주문 테이블을 분리하여, 고객과 주문 간의 관계를 정의하는 방식

핵심 목표: **데이터를 효율적으로 구조화하여 정확한 데이터 모델링을 할 수 있도록 함**

<br/>

**2. Physical Design (물리적 설계)**

목표: 데이터베이스의 물리적 저장 구조를 정의하고, 효율적인 파일 조직(file organization) 및 **저장 구조(storage structures)** 를 설정하는 단계

중요한 결정 사항:

파일 조직: 데이터를 어떻게 디스크에 저장할지 결정 -> 예: 데이터가 순차적으로 저장될지, 인덱스가 사용될지, 클러스터링된 인덱스가 사용될지 등

저장 구조: 내부적인 저장 방식을 최적화하여, 데이터 접근 속도나 검색 성능을 향상시킬 수 있는 방안 설정 -> 예: 해시 테이블, B-트리 등의 자료 구조를 사용하여 빠른 데이터 검색을 지원

핵심 목표: **데이터를 효율적으로 저장하고 액세스할 수 있는 방법을 설계**

<br/>

## Database Engine

데이터베이스 시스템의 핵심 부분으로, **시스템의 다양한 책임을 처리하는 여러 모듈로 나눔**

1. storage manager

2. Query Processor component

3. Transaction Management component

<br/>

## storage manager 

데이터베이스 시스템에서 중요한 역할을 담당하는 모듈

저수준의 데이터와 애플리케이션 프로그램 간의 인터페이스 역할을 함 

저수준 데이터 : 물리적 저장 형식(이진 코드 등) -> 컴퓨터만 이해하는 언어 

고수준 데이터 : 사람이 이해하는 언어 ex) SQL 등등 

<br/>

## Storage Manager의 주요 역할 및 책임:

1.운영체제 파일 관리자와의 상호작용

2. 데이터의 효율적인 저장, 검색 및 업데이트

<br/>

## Storage Manager의 주요 구성 요소: 

1. 권한 관리와 데이터 무결성을 보장하는 역할 (무결성 : 데이터가 일관성 있고 정확한 상태로 유지되도록 보장하는 것)

2. Transaction 관리 (Transaction: 데이터베이스에서 하나의 논리적 작업을 수행하기 위해 여러 개의 **작업(연산)** 을 묶은 것)

3. 데이터베이스의 파일 관리와 저장 방식을 처리

4. 데이터베이스에서 사용하는 버퍼를 관리 (버퍼: 임시 저장 공간)

<br/>

## Storage Manager가 구현하는 데이터 구조:

1. Data Files :데이터베이스 자체를 저장하는 파일, 데이터베이스의 실제 데이터를 포함

2. Data Dictionary : 메타데이터를 저장하는 구조로, 데이터베이스의 **스키마(schema)** 에 대한 정보를 포함 (예: 테이블 구조, 열의 이름, 제약 조건 등)

3. Indices (인덱스) : 데이터를 빠르게 접근할 수 있도록 돕는 데이터 구조 (예: 특정 값이 포함된 데이터 항목에 대한 포인터를 제공하여 빠른 검색이 가능하게 함)

<br/>

## Query Processor

쿼리 프로세서 구성 요소:

1. **DDL Interpreter**: DDL(데이터 정의 언어) 명령을 해석하고, 정의된 스키마나 구조를 데이터 딕셔너리에 기록함

2. **DML Compiler**: DML(데이터 조작 언어) 명령을 처리하여, 쿼리 언어의 명령을 데이터베이스가 이해할 수 있는 저수준 명령으로 변환하는 역할

3. Query Evaluation Engine: DML 컴파일러가 생성한 저수준 명령을 실행하는 엔진

<br/>

## SQL 처리 과정:
1. **쿼리(Query)**: 사용자가 요청한 SQL 명령입니다.

2. **Parser and Translator**: SQL 쿼리를 구문 분석하고 번역하여 관계 대수(Relational Algebra) 표현식으로 변환합니다.

3. **Relational-Algebra Expression**: SQL 쿼리는 관계 대수 표현식으로 변환되며, 이는 데이터베이스 내에서 작업을 어떻게 처리할지에 대한 논리적 표현입니다.

4. **Optimizer**: 이 단계에서 쿼리 최적화가 이루어집니다. 데이터에 대한 통계를 바탕으로 여러 실행 계획을 비교하고, 최적의 실행 계획을 선택합니다.

5. **Evaluation Engine**: 최적화된 실행 계획을 바탕으로 실제 데이터를 조회하거나 조작하는 작업을 수행하는 엔진입니다.

6. **Evaluation Engine (반복)**: 실행 과정에서 쿼리의 결과가 나올 때까지 반복적으로 평가하고 처리합니다.

7. **쿼리 출력(Query Output)**: 최종적으로 쿼리의 결과를 사용자에게 반환합니다.

<br/>

**Parser의 의미는 주어진 데이터를 해석하고 분석하여 원하는 형식으로 변환하는 프로그램이나 작업을 말한다**

대수 과정에서 수학적인 기법을 사용하여 데이터를 처리함

<br/>

## Transaction Management

**Transaction** : 데이터베이스에서 하나의 논리적 작업을 수행하기 위해 여러 개의 **작업(연산)** 을 묶은 것

**Transaction-Management component** : 시스템 실패나 트랜잭션 실패가 발생했을 때도 데이터베이스가 일관된 상태를 유지하도록 보장

**Concurrency-control manager** : 동시성(concurrency) 문제를 처리하는 중요한 component












