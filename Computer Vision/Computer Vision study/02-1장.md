<img width="69" height="92" alt="image" src="https://github.com/user-attachments/assets/a4cfa081-2158-4deb-802d-4137300e86f7" />### 세 종류의 영상 처리 연산

- 영상을 처리할 때, 화소(픽셀)의 값을 새로 계산하는 방법은 화소가 새로운 값을 **어디서 받느냐**에 따라크게 3가지가 존재한다

    - **점연산(point operation)** : 자기 자신에게서 받음
 
        - 밝기 조절 -> 각 픽셀의 값을 단순히 더 밝게/어둡게 

    - **영역연산(area operation)** : 이웃 화소들에서 받음
 
        - 한 픽셀의 새 값은 주변 픽셀들의 값을 함께 참고해서 정한다 

    - **기하연산(geometric operation)** : 기하학적 변환이 정해주는 곳에서 받음
 
        - 한 픽셀의 새 위치가 좌표 변환(이동, 회전, 확대 등)에 의해 바뀌면서 값을 가져온다 
 
    - ![System Resources](../../images/Computer%20Vision%20images/영상처리연산종류.png)

- 정리하면

    - 점 연산과 영역 연산은 화솟값
 
    - 기하연산은 위치값을 건드리는 연산임
      
<br/>

### 점 연산

- **선형 연산**
  
    - 영상을 밝거나 어둡게 조정
 
        - 사진 전체를 더 밝게 하거나 어둡게 만든다 

    - 수학적으로 단순히 더하거나 빼는 방식으로 밝기 조절 (그래서 선형 연산임임)
     
    - 아래 공식에서 L은 최대 밝기이다 

    - ![System Resources](../../images/Computer%20Vision%20images/점연산공식.png)
 
    - min(f(j,i)+a, L-1) : 픽셀 값에 +a (더 밝게), 단 최대치 L-1을 넘지 않음 (i,j는 좌표값)

    - max(f(j,i)-a, 0) : 픽셀 값에서 a만큼 빼기 (어둡게), 단 0보다 작아지지 않음

    - (L-1) - f(j,i) : 픽셀 값을 반전 → 밝은 부분은 어둡게, 어두운 부분은 밝게
 
        - 보통 영상은 0부터 L-1까지의 값으로 픽셀 밝기를 표현 (0~255)
     
        - 8비트에서 그레이스케일 기준 (색 없이 밝기 정보만을 기준) L = 256 이므로
     
        - L-1 에서 (i,j)의 화솟값을 빼주면 밝기가 반전됨

<br/>

- **비선형 연산** : 단순히 더하거나 빼는 게 아니라, **지수(γ)** 를 사용해서 밝기를 조절

    - ex: 감마 연산  

    - ![System Resources](../../images/Computer%20Vision%20images/감마연산공식.png)
 
    - 지수에 감마(γ)가 있는 f(i,j)를 보면 위에 점이 존재한다. 이것은 **정규화**의 의미이다
 
    - 즉 f(i,j)가 0~1의 값으로 존재하므로
 
        - γ < 1 → 값이 원래보다 커져서 더욱 밝아짐

        - γ > 1 → 값이 줄어들어서 더욱 어두워짐

        - γ = 1 → 변화 없음 (원본 그대로)
     
        - 즉, 선형 연산은 일정하게 밝기가 변하지만, 비선형 연산은 작은 값(어두운 픽셀)은 많이 밝아지고, 큰 값(밝은 픽셀)은 적게 변함 -> 즉 **디테일이 살아난다**
     
        - ![System Resources](../../images/Computer%20Vision%20images/감마연산그래프.png)
     
        - x축과 y축 모두 0~255 이고 x의 임의의 값 하나를 선택해서 y 값을 비교하면 밝기의 차이가 확실히 보인다 

<br/>

- **명암 조절**

    - **히스토그램 평활화(histogram equalization)** : 히스토그램이 평평하게 되도록 영상을 조작해 영상의 **명암 대비를 높이는** 기법
 
    - ![System Resources](../../images/Computer%20Vision%20images/히스토그램평활화공식.png)
 
        - l : 원래의 픽셀 값 (0~7 단계)

        - h : 그 값의 등장 횟수 (빈도수)

        - ℎ^(𝑙) : 누적 분포 함수(CDF, cumulative distribution function)
     
            - 픽셀 값이 𝑙 이하인 값들이 영상 전체에서 차지하는 비율 
          
        - l′: 최종 변환된 픽셀 값 (반올림 처리) 

    - 예시문제
      
    - ![System Resources](../../images/Computer%20Vision%20images/히스토그램평활화예시문제.png)
 
        - 위 예시 문제에 대한 아래 풀이를 함깨 보자
     
        - ![System Resources](../../images/Computer%20Vision%20images/히스토그램과정표.png)
     
            - h (빈도수) : 원래 영상에서 픽셀 값 l이 몇 번 나오는지 센 값
         
            - ĥ (정규화된 히스토그램) : 각 빈도수를 전체 픽셀 수로 나눔 → 확률로 변환
         
                - ex: 픽셀이 64개라면 h=2 → 2/64 = 0.03125
             
            - Ĥ (누적 분포 함수, CDF) : 지금까지 나온 비율을 순서대로 **누적**해서 더한 값
         
            - Ĥ × (L-1) : 누적 분포값을 픽셀 값 범위(0~L-1)로 맞추기 위해 곱
         
                - 여기서는 L=8 → 최대값 7
             
                - ex: Ĥ = 0.484375 → 0.484375 × 7 = 3.390625

            - l′ (최종 매핑 값) : 소수점 반올림해서 정수 픽셀 값으로 변환
         
            - 아래는 예시 결과이다
         
            - ![System Resources](../../images/Computer%20Vision%20images/히스토그램예시문제결과.png)
            - 쉬운 예시를 들자면
         
                - 어떤 반에서 시험 점수가 50~60점일 때, 
             
                - 학생들 점수 차이가 거의 없으니, 누가 더 잘했는지 구분하기 어려움
             
                - 이때, 원래 50점 학생은 10점으로, 60점 학생은 90점으로 점수를 재매핑하면 차이가 확연하게 보임 

<br/>

### 영역 연산 

- **영역 연산** : **이웃 화소를 고려**해서 새로운 값을 결정하는 기법

    - 주로 **컨볼루션(Convolution) 연산**을 통해 이루어짐 

<br/>

- **컨볼루션(Convolution)** : 각 화소에 필터u 를 적용해 곱의 합을 구하는 연산

    - Input 영상에서 커널을 거쳐 의미있는 feature를 검출 

<br/>

- **컨볼루션(Convolution) 공식**

    - 1차원 컨볼루션 
 
    - ![System Resources](../../images/Computer%20Vision%20images/02-1장컨볼루션공식1.png)
 
        - w : 커널의 너비
     
        - h : 커널의 높이
     
        - u(i)f(x+i)는 내적의 의미
     
            - ![System Resources](../../images/Computer%20Vision%20images/02-1장컨볼루션내적공식예시.png)
     
        - 시그마 범위는 커널 크기에 의해 위와 같이 정해짐 

    <br/>

    - 2차원 컨볼루션 

    - ![System Resources](../../images/Computer%20Vision%20images/02-1장컨볼루션공식2.png)
 
        - 예시
     
        - ![System Resources](../../images/Computer%20Vision%20images/02-1장컨볼루션공식2예시자료.png)

<br/>

- 필터의 종류

    - 스무딩 필터 (Smoothing filter)

        - 평균값으로 주변을 부드럽게 → 노이즈 제거, 블러 효과

    - 가우시안 필터 (Gaussian filter)

        - 가까운 픽셀에 더 큰 가중치 → 자연스러운 블러, 노이즈 제거

    - 샤프닝 필터 (Sharpening filter)

        - 중심 강조, 주변 억제 → 경계(엣지) 강조, 이미지 선명화

    - 엠보싱 필터 (Embossing filter)

        - 특정 방향 밝기 차이 강조 → 입체적(양각/음각) 효과

<br/>

### 스무딩 필터 (Smoothing filter)

- **스무딩 필터** : 이미지를 **부드럽게** 하여 **노이즈를 제거**하거나 **경계를 흐리게** 함

    - 스무딩 필터를 적용하면 사진이 전체적으로 흐릿해지면서 노이즈를 없애는게 목적
 
    - 블러 효과와 유사함
 
    - ![System Resources](../../images/Computer%20Vision%20images/02-1장스무딩필터적용예시자료.png)

<br/>

- **스무딩 필터 원리** : 주변값을 전부 더해 **평균**을 낸다

    - 픽셀의 큰 값은 줄고, 작은 값은 올라가면서 평균에 가까워짐
 
    - 결과적으로 모든 픽셀이 중간 톤(평균값) 에 가까워짐
 
    - ![System Resources](../../images/Computer%20Vision%20images/02-1장스무딩필터예시필터모음.png)

<br/>

### 가우시안 필터 (Gaussian filter)

- 스무딩 필터는 모든 픽셀을 동등하게 생각함

    - 하지만 이렇게 되면 **중심에 가까운 픽셀**이 더 중요한 경우, 그 차이를 **고려하지 못함**
 
    - 따라서 **가우시안 필터**는 **중심에 가까운 픽셀에 더 큰 비중(가중치)** 을 준다
 
        - 중심과 가까운 정보는 많이 반영, 멀리 있는 정보는 조금만 반영 → 더 자연스러운 흐림효과
     
        - ![System Resources](../../images/Computer%20Vision%20images/02-1장가우시안필터3D그래프자료.png)

<br/>

- **가우시안 필터 공식**

    - ![System Resources](../../images/Computer%20Vision%20images/02-1장가우시안필터공식자료.png)
 
    - G(x,y): (x,y) 좌표에 해당하는 가중치 값
 
    - 𝜎: 분산(표준편차), 블러의 강도를 조절하는 파라미터
 
        - σ가 **크면** → **더 넓게** 퍼짐 → 흐림 효과 **강해짐**
 
        - σ가 **작으면** → **좁게** 집중 → 흐림 효과 **약해짐**


    - 추가적으로 가중치 공식에 존재하는 아래 공식은 정규화의 역할을 한다
 
        - ![System Resources](../../images/Computer%20Vision%20images/02-1장가우시안필터정규화공식.png)
     
        - **증명과정**
     
            - ![System Resources](../../images/Computer%20Vision%20images/02-1장가우시안필터정규화공식증명과정.png)
         
            - 이렇게 정규화를 하지 않으면 의도치 않은 밝기의 변화가 생기게 된다 

















































































