### 영상 처리 (Image Processing)

- **영상 처리 (Image Processing)** : 특정 목적을 달성하려고 원래 영상을 개선된 새로운 영상으로 변환하는 작업

    - 화질 개선 자체가 목적일 경우에 사용
 
    - 컴퓨터 비전은 영상 처리를 전처리로 활용하여 인식 성능을 향상함
      
![System Resources](../../images/Computer%20Vision%20images/안개예시.png)

<br/>

### 컴퓨터비전 & 영상 처리 차이 

![System Resources](../../images/Computer%20Vision%20images/컴퓨터비전_영상처리차이.png)

<br/>

### 영상 획득과 표현

- 영상 획득 과정은 매우 복잡하다

    - 실제로 빛이 들어와서 이미지가 만들어지는 과정은 여러 단계가 얽혀 있어 어려움 

<br/>

- **핀홀 카메라 모델** : 렌즈 없이 하나의 작은 구멍(핀홀)만으로 외부의 빛을 받아 화면에 상을 맺는 가장 단순한 카메라 모델

    - 복잡한 과정 중에서 **중요한 핵심만 간단하게** 설명할 수 있다
 
    - 핀홀 카메라의 원리를 이용해서 영상 획득 원리 (카메라의 기본 원리)를 간단하게 설명하자면
 
    - **빛이 직선으로만 이동**하기 때문에 위에 있는 물체에 반사된 빛은 구멍을 통과하기 위해 아래로 향하고, 아래쪽에서 반사된 빛은 위로 올라가서 구멍 뒤쪽에 **스크린**에 **뒤집혀** 보이는 현상이 발생한다
 
    - 이후 렌즈를 사용하게 되면서 더 많은 빛을 받아들이고 초점을 맞춰 선명하고 밝은 상을 얻음
 
        - 렌즈도 물체가 뒤집혀 보이지만 카메라 소프트웨어(펌웨어, ISP)가 이 데이터를 받아서 자동으로 상하·좌우를 반전시켜 저장


    - ![System Resources](../../images/Computer%20Vision%20images/핀홀카메라.png)

<br/>

### 영상 처리 과정 

![System Resources](../../images/Computer%20Vision%20images/영상처리과정.png)


- **피사체 (Object)**

    - 우리가 찍으려는 대상 (예: 사람, 나무, 자동차).

    - 빛을 반사해서 카메라 쪽으로 전달

    - 출발점: 영상 정보의 원천.

- **렌즈 (Lens)**

    - 피사체에서 반사된 빛을 모아 이미지 센서 위에 초점을 맺게 함

    - 빛을 굴절시켜 선명한 상을 센서에 맺히도록 조절

- **이미지 센서 (Image Sensor)**

    - 빛(광자)을 **전기 신호(전하)** 로 변환

    - 픽셀 단위로 빛의 세기(밝기, 색상)를 수치화

    - 즉, **빛 → 전기 신호 변환 장치**
 
    - 대표적으로 CCD, CMOS

- **ISP (Image Signal Processor)**

    - 센서에서 들어온 신호를 **디지털 영상으로** 가공

    - 노이즈 제거, 색 보정, 화이트 밸런스, 밝기·대비 조절 등을 수행 (뒤집힌 사진의 반전도 수행)

    - 거친 원본 신호 → **사람이 보기 좋은 영상**으로 보정

- **메모리 카드 (Memory Card)**

    - 최종적으로 처리된 영상을 **파일(JPEG, PNG, RAW 등)로 저장**

    - 이후 재생, 전송, 편집 등에 활용.
    
    - 완성본 보관소

<br/>

- 정리하면

    - 피사체에서 렌즈로 빛을 받음 ->  이미지 센서에서 전기신호로 변경 -> ISP에서 가공 -> 메모리 카드로 저장

<br/>

### 이미지 센서

- **CCD (Charge-Coupled Device)**
  - 픽셀에 모인 전하를 순차적으로 이동시켜 읽는 방식
  - 화질이 우수하고 노이즈가 적지만, 전력 소모가 크고 가격이 비쌈

- **CMOS (Complementary Metal-Oxide Semiconductor)**
  - 픽셀마다 증폭 회로를 두어 병렬적으로 전하를 읽는 방식
  - 저전력·고속·저가로 현재 대부분의 카메라에 사용됨

- **ToF (Time of Flight)**
  - 빛을 쏘고 반사되어 돌아오는 시간을 측정해 거리(깊이)를 계산
  - 빛의 비행 시간을 측정해 깊이(3D) 정보를 얻는 센서

- **IR (Infrared)**
  - 가시광선 대신 적외선 파장을 감지해 영상을 형성
  - 적외선을 감지해 어두운 환경이나 열을 측정하는 센서

<br/>

### 샘플링(sampling) & 양자화(quantization)

- 샘플링과 양자화는 ISP 단계의 핵심 과정이다 

- **샘플링(sampling)**

    - 원래 연속적인 영상을 가로 M, 세로 N개의 격자로 나누어 각각의 점(픽셀)에서 빛의 세기를 **대표값**으로 뽑아내는 과정
 
- **L 단계로 양자화 (quantization)**

    - 픽셀 값(**밝기나 색상**)을 L개 단계로 나누어 가장 가까운 값으로 바꿔주는 과정
 
    - 샘플링 과정에서는 연속적인 빛의 세기를 뽑았다면, 양자화 과정에서는 연속적인 값은 **이산적인 값**(0~255)으로 바꾸는 과정임
 
    - ![System Resources](../../images/Computer%20Vision%20images/샘플링양자화.png)
 
    - 또한 수학 그래프처럼 (0,0)이 가운데가 아니라, **왼쪽 위가 (0,0) 좌표**이다
 
        - (y, x) 표기 → 보통은 행(row), 열(column) 순서이기 때문
     
        - 함수에 따라 (x,y) 표기 사용하니 주의할 필요 
        
<br/>

### Tensor (텐서)

- Tensor : 수를 담는 다차원 배열(multidimensional array).


- 0차원 (스칼라, scalar)
    - 그냥 하나의 숫자
    - ex: 7, 3.14

- 1차원 (벡터, vector)
    - 숫자들이 일렬로 모여 있는 것
    - ex: [1, 2, 3, 4]

- 2차원 (행렬, matrix)

    - 가로·세로 격자로 정리된 것

![System Resources](../../images/Computer%20Vision%20images/tensor.png)

<br/>

### RGB 컬러 모델

- **RGB 컬러 모델** : 빛의 3원색(빨강, 초록, 파랑)으로 색을 표현하는 모델

    - 컴퓨터 모니터, 카메라 센서 등 디지털 장치의 기본 컬러 표현 방식
 
    - 하드웨어(디스플레이, 센서)와 직접적으로 호환됨
 
        - 기기(모니터, 카메라 센서 등)의 동작 원리 자체가 RGB 구조로 되어 있음
 
    - 인간의 직관적 색 지각과 차이가 있어, 색상·채도·명도를 따로 다루기 불편
 
        - 사람은 빨강/노랑/밝음/어두움 같은 직관적 단위로 색을 느끼지만, RGB는 단순히 세 가지 숫자(R,G,B)라서 색상, 채도, 명도를 구분하기 어려움

        - ![System Resources](../../images/Computer%20Vision%20images/RGB큐브.png)
 
<br/>

### HSV 컬러 모델

- **Hue(색상)** : 빨강, 파랑, 초록 등 순수한 색의 종류

    - 𝐻 ∝ 색상간차이 

- **Saturation(채도)** : 색의 선명함, 회색~원색까지의 비율

    -  𝑆 ∝max(𝑅,𝐺,𝐵) −min(𝑅,𝐺,𝐵) 

    - 채도가 높으면 선명한 색, 낮으면 흐린 회색에 가까움 

- **Value(명도)** : 밝기 정도

    -  𝑉 =max(𝑅,𝐺,𝐵) 

- 인간이 색을 인식하는 방식에 가깝게 설계된 모델

    - 사람이 "밝다, 탁하다, 빨갛다"라고 느끼는 방식과 비슷하게 맞춰져 있음 

- 조명 변화에 어느 정도 강인

    - 같은 물체라도 조명이 달라질 때 RGB 값은 크게 변하지만, HSV는 비교적 일정하게 표현 가능 

- 계산 변환 과정이 필요해 **연산 비용이 RGB보다 큼**

    - RGB를 HSV로 바꾸려면 수학적 변환이 필요 → **계산량 증가**
 
![System Resources](../../images/Computer%20Vision%20images/HSV.png)
  




























