## 행렬 곱셈 문제 

행렬 연산에 대해 복습을 해보자면, 행렬곱은 교환법칙이 성립하지 않지만 결합법칙은 성립한다

예를 들어행렬 𝐴,𝐵,𝐶에 대해 𝐴(𝐵𝐶) = (𝐴𝐵)𝐶 가 성립한다 

따라서 여러 개의 행렬이 곱해진 경우에 해당 곱을 구하기 위해 다양한 순서가 존재하며, 그 **순서에 따라** 연산 횟수가 크게 달라지기도 한다

만약 𝐴는 10×100 , 𝐵는 100 × 5, 𝐶는 5 × 50의 shape을 갖고 있다면

- (𝐴𝐵)𝐶: 7500번 스칼라 곱셈 필요

- 𝐴(𝐵𝐶): 75000번 스칼라 곱셈 필요

<br/>

이에 행렬곱 𝐴1𝐴2𝐴3…𝐴𝑛 을 가장 **효율적으로** 연산하는 **공식을 찾는 것이** 행렬 곱셈 문제의 **목표**이다

<br/>

행렬곱 𝐴1𝐴2𝐴3…𝐴𝑛 을 수행하기 위해 𝑛−1번의 행렬곱을 수행하여야 하는데, 이 때 마지막 순서로 행렬곱을 하는 상황을 나타내보면 아래와 같이 𝑛−1개의 경우의 수가 있다

- A1(A2 … An )

- (A1A2)(A3 … An)

- (A1A2 A3)(A4 … An)

- ∙ ∙ ∙

- (A1 … An-2) (An-1An)

- (A1 … An-1)An

위 경우들 중 어느 경우가 가장 효율적인지를 **최적 부분구조**를 활용하여 구할 수 있다

<br/>

현재 상황에서의 행렬곱 형태를 **일반화하면** (𝐴1…𝐴𝑘)(𝐴𝑘+1…𝐴𝑛) 으로 표현 가능하다

그리고 이 때 특정 𝑘에 대한 곱셈 비용은 **앞쪽 괄호로 엮인** 행렬곱의 비용, **뒤쪽 괄호로 엮인** 행렬곱의 비용 및 괄호 안의 연산이 모두 끝난 **두 행렬을 곱하는 비용**을 더하면 계산할 수 있다

![image](https://github.com/user-attachments/assets/d28c2906-f615-4bb5-aef6-13aaa51f31b3)

<br/>

주어진 공식에서 pi-1 * pk * pj가 의미하는 바는 **행렬의 곱센 연산 횟수**이다

만약 3x2 행렬과 2x1 행렬을 곱한다면, 최종 행렬은 3x1 행렬이 되는데, 이때 **두 행렬을 연결시키는 숫자만큼** 각 요소를 반복해서 결과가 나온 것이다 

즉, 3x1개의 요소를 각각 2번의 곱셈을 이용하여 출력한 것이므로, 총 3 x 2 x 1 번의 결과가 수행이 된 것이다 

이를 일반화 하여 **pi-1 * pk * pj** 라고 표현한다
